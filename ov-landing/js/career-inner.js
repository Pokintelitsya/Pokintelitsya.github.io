"use strict";var searchParams=new URLSearchParams(window.location.search),jobUID=searchParams.get("uid"),comeetToken="1B16C4BD7005131B1A26F391B1",comeetID="B1.001",jobDetailsUrl="https://www.comeet.co/careers-api/2.0/company/".concat(comeetID,"/positions/").concat(jobUID,"?token=").concat(comeetToken,"&details=true");function fetchJobDetails(){fetch(jobDetailsUrl).then((function(e){e.ok&&e.json().then((function(e){return insertJobDetails(e)}))}))}function insertJobDetails(e){if(jobUID){var t=document.getElementById("job-title"),n=document.getElementById("job-info"),o=document.getElementById("job-details"),a=document.getElementById("mailto"),i=document.getElementById("uid"),l="";i.value=jobUID,t.innerHTML=e.name,n.innerHTML=getJobInfoTemplate(e),e.details.forEach((function(e){e.value?(e.value=e.value.replace(/(<p><br><\/p>)+/g,""),l+="<h3>".concat(e.name,"</h3> ").concat(e.value)):l=""})),o.innerHTML=l,a.href="mailto:".concat(e.email),a.innerText=e.email}else window.location.replace("/career_template.html")}function getJobInfoTemplate(e){var t="";e.location&&"IL"===e.location.country&&(t="Israel");var n=e.location?e.location.city:"",o=n||t?'<span class="jobs__location">'.concat(n,", ").concat(t,"</span>"):"";return e.employment_type=e.employment_type?e.employment_type:"Full-time",e.experience_level=e.experience_level?'<span class="jobs__level">'.concat(e.experience_level,"</span>"):"","\n                    ".concat(o,'\n                    <span class="jobs__type">\n                        ').concat(e.employment_type,"\n                    </span>\n                     ").concat(e.experience_level)}fetchJobDetails(),window.OW=window.OW||{},OW.careers={filesAllowed:[".pdf",".doc",".docx"],initForm:function(){var e=this,t=document.getElementById("apply-form");t&&(document.querySelectorAll(".err-msg").forEach((function(e){e.previousElementSibling.addEventListener("focus",(function(){e.textContent="",e.style.display="none"}))})),t.addEventListener("submit",(function(n){return n.preventDefault(),e.formValidation(t)&&e.formSend(t),!1})),this.initFileUpload())},formSend:function(e){var t=this,n=document.getElementById("first_name"),o=document.getElementById("last_name"),a=e.full_name.value,i=document.getElementById("submit_form"),l="https://www.comeet.co/careers-api/1.0/company/B1.001/positions/".concat(jobUID,"/apply?token=1B16C4BD7005131B1A26F391B1");return n.value=a.split(" ")[0],o.value=a.split(" ")[1]||"--",document.getElementById("apply-form-error").innerText="",i.innerText="Sending...",i.disabled=!0,fetch(l,{body:new FormData(e),cache:"no-cache",method:"POST"}).then((function(e){e.ok?t.onFormSuccess():(i.innerText="Send Application",i.disabled=!1,e.json().then((function(e){return t.onFormError(e.message)})))})),!1},onFormSuccess:function(){document.getElementById("apply-form").style.display="none",document.getElementById("form-success").style.display="flex"},onFormError:function(e){document.getElementById("apply-form-error").innerText=e},formValidation:function(){var e="Please fill out this field",t="Please enter a valid email",n="Please add a file",o=document.getElementsByName("full_name")[0],a=document.getElementsByName("email")[0],i=document.getElementsByName("phone")[0],l=document.getElementsByName("comment-about")[0],s=document.getElementsByName("cv")[0];return o.value?a.value?/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i.test(a.value.toLowerCase())?i.value?l.value?!(!s.files||!s.files[0])||(this.setError(s,n),!1):(this.setError(l,e),!1):(this.setError(i,e),!1):(this.setError(a,t),!1):(this.setError(a,e),!1):(this.setError(o,e),!1)},setError:function(e,t){var n=e.nextElementSibling;n.textContent=t,n.style.display="inline-block",e.scrollIntoView()},initFileUpload:function(){var e=this,t=document.getElementById("file-upload"),n=document.getElementById("upload-error"),o=document.getElementById("file-target"),a=document.getElementById("file-name"),i=document.getElementById("remove-file"),l=document.getElementById("upload-input");l.addEventListener("change",(function(){if(!(l&&l.files&&l.files[0]))return!1;for(var n=l.files[0].name,i=!1,s=0;s<e.filesAllowed.length;s++)n.indexOf(e.filesAllowed[s])>-1&&(i=!0);return o.classList.remove("active"),i?(a.innerText=n,t.classList.remove("empty")):(e.setError(l,"Unsupported format"),t.classList.add("empty"),l.val="",l.type="text",l.type="file"),!1})),i.addEventListener("click",(function(){n.classList.remove("show"),a.innerText="",o.classList.remove("active"),t.classList.add("empty"),l.val=""})),o.addEventListener("dragenter",(function(){o.classList.add("active")})),o.addEventListener("dragover",(function(){o.classList.add("active")})),o.addEventListener("blur",(function(){o.classList.remove("active")})),o.addEventListener("dragleave",(function(){o.classList.remove("active")})),l.addEventListener("focus",(function(){o.classList.add("active")})),l.addEventListener("blur",(function(){o.classList.remove("active")}))}},OW.careers.initForm();